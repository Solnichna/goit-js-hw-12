{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from \"axios\"; \n\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst container = document.querySelector(\"div\");\nconst inputDate = document.querySelector(\"input\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\n\nlet searchTerm = '';\nlet page = 1;\n\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  container.append(loader);\n};\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n};\n\nconst showLoadMoreBtn = () => {\n  loadMoreBtn.style.display = \"block\";\n};\n\nconst hideLoadMoreBtn = () => {\n  loadMoreBtn.style.display = \"none\";\n};\n\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  showLoader();\n  gallery.innerHTML = \"\";\n  const searchTerm = inputDate.value;\n  page = 1;\n  try {\n    await searchImages();\n    showLoadMoreBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  showLoader();\n  try {\n    page++;\n    await searchImages();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n\n\nasync function searchImages() {\n  const apiKey = '42288638-d7f8a30b0a31b090439479823';\n  const perPage = 15; \n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching <br>your search query. Please try again!</br>',\n        position: 'center',\n        transitionIn: \"fadeInLeft\",\n      });\n    } else {\n      const totalHits = response.data.totalHits; \n      const currentHits = page * perPage; \n      if (currentHits >= totalHits) {\n        hideLoadMoreBtn(); \n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'center',\n          transitionIn: \"fadeInLeft\",\n        });\n      }\n\n      const galleryItemHeight = gallery.querySelector('.gallery-item').getBoundingClientRect().height; // Height of one gallery item\n      const markup = response.data.hits.map(data => {\n        return `\n          <li class=\"gallery-item\">\n            <a href=\"${data.largeImageURL}\">\n              <img class=\"gallery-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\">\n            </a>\n            <p><b>Likes: </b>${data.likes}</p>\n            <p><b>Views: </b>${data.views}</p>\n            <p><b>Comments: </b>${data.comments}</p>\n            <p><b>Downloads: </b>${data.downloads}</p>\n          </li>`;\n      }).join('');\n      gallery.insertAdjacentHTML(\"beforeend\", markup);\n      const lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionType: 'attr',\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        fadeSpeed: 150,\n        captionSelector: \"img\",\n        captionDelay: 250,\n      });\n      lightbox.on('show.simplelightbox').refresh();\n\n      \n      window.scrollBy({\n        top: galleryItemHeight * 2, \n        behavior: 'smooth'\n      });\n    }\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}"],"names":["form","gallery","container","inputDate","loadMoreBtn","searchTerm","page","showLoader","loader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","event","searchImages","error","url","response","axios","iziToast","totalHits","galleryItemHeight","markup","data","SimpleLightbox"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,KAAK,EACxCC,EAAY,SAAS,cAAc,OAAO,EAC1CC,EAAc,SAAS,cAAc,YAAY,EAGvD,IAAIC,EAAa,GACbC,EAAO,EAEX,MAAMC,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BN,EAAU,OAAOM,CAAM,CACzB,EAEMC,EAAa,IAAM,CACvB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,EAEME,EAAkB,IAAM,CAC5BN,EAAY,MAAM,QAAU,OAC9B,EAEMO,EAAkB,IAAM,CAC5BP,EAAY,MAAM,QAAU,MAC9B,EAGAJ,EAAK,iBAAiB,SAAU,MAAOY,GAAU,CAC/CA,EAAM,eAAc,EACpBL,IACAN,EAAQ,UAAY,GACDE,EAAU,MAC7BG,EAAO,EACP,GAAI,CACF,MAAMO,EAAY,EAClBH,GACD,OAAQI,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRL,GACD,CACH,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CAChDG,IACA,GAAI,CACFD,IACA,MAAMO,EAAY,CACnB,OAAQC,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRL,GACD,CACH,CAAC,EAGD,eAAeI,GAAe,CAG5B,MAAME,EAAM,qEAA4CV,kEAA2EC,cAAiB,KACpJ,GAAI,CACF,MAAMU,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,KAAK,KAAK,SAAW,EAChCE,EAAS,MAAM,CACb,QAAS,oFACT,SAAU,SACV,aAAc,YACtB,CAAO,MACI,CACL,MAAMC,EAAYH,EAAS,KAAK,UACZV,EAAO,IACRa,IACjBR,IACAO,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,SACV,aAAc,YACxB,CAAS,GAGH,MAAME,EAAoBnB,EAAQ,cAAc,eAAe,EAAE,sBAAuB,EAAC,OACnFoB,EAASL,EAAS,KAAK,KAAK,IAAIM,GAC7B;AAAA;AAAA,uBAEQA,EAAK;AAAA,gDACoBA,EAAK,sBAAsBA,EAAK;AAAA;AAAA,+BAEjDA,EAAK;AAAA,+BACLA,EAAK;AAAA,kCACFA,EAAK;AAAA,mCACJA,EAAK;AAAA,gBAEjC,EAAE,KAAK,EAAE,EACVrB,EAAQ,mBAAmB,YAAaoB,CAAM,EAC7B,IAAIE,EAAe,aAAc,CAChD,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,IACX,gBAAiB,MACjB,aAAc,GACtB,CAAO,EACQ,GAAG,qBAAqB,EAAE,QAAO,EAG1C,OAAO,SAAS,CACd,IAAKH,EAAoB,EACzB,SAAU,QAClB,CAAO,CACF,CACF,OAAQN,EAAP,CACA,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH"}